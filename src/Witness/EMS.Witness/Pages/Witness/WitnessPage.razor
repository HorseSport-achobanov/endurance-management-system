@page "/"

@using Core.Domain.AggregateRoots.Manager;
@using EMS.Witness.Pages.Witness.Components
@using EMS.Witness.Services;
@inject IArrivelistService ArrivelistService;

<div class="container">
    <div class="row mb-3">
        <div class="accordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button @this.arrivelistButtonCss" type="button" @onclick="this.ToggleArrivelist">
                        Record Arrive Time
                    </button>
                </h2>
                <div id="arrivelist-content" class="accordion-collapse collapse @this.arrivelistCss" aria-labelledby="arrivelist-header">
                    <div class="accordion-body">
                        <ArrivelistComponent />
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 id="edit-form-header" class="accordion-header">
                    <button class="accordion-button @this.arriveFormButtonCss" type="button" @onclick="this.ToggleArriveForm">
                        Save (Edit) Time
                    </button>
                </h2>
                <div id="edit-form-content" class="accordion-collapse collapse @arriveFormCss" aria-labelledby="edit-form-header">
                    <div class="accordion-body">
                        <ArriveFormComponent />
                    </div>
                </div>
            </div>
        </div>
     </div>
</div>

@code {
    private string arrivelistButtonCss = "";
    private string arriveFormButtonCss = "collapsed";
    private string arrivelistCss = "show";
    private string arriveFormCss = "";

    public void ToggleArrivelist()
    {
        if (this.arrivelistCss == "show")
        {
            this.arrivelistCss = "";
            this.arrivelistButtonCss = "collapsed";
        }
        else
        {
            this.arrivelistCss = "show";
            this.arrivelistButtonCss = "";
        }
    }

    public void ToggleArriveForm()
    {
        if (this.arriveFormCss == "show")
        {
            this.arriveFormCss = "";
            this.arriveFormButtonCss = "collapsed";
        }
        else
        {
            this.arriveFormCss = "show";
            this.arriveFormButtonCss = "";
        }
    }

    // Necessary for EditForm, which is necessary for InputSelect
    private object Model { get; } = new();
}