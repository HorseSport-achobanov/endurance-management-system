@using NTS.Domain.Setup.Entities;
@using NTS.Judge.Setup.Competitions
@using Not.Blazor.Forms;
@using Not.Blazor.TM.Forms;
@using Not.Blazor.TM.Forms.Components;

@inherits NotForm<Loop>;

<EditForm Model="_model">
    <MudNumericField @bind-Value="_model.Distance" Label="Loop" />
</EditForm>

@code {
    private MudNumericField<double> _distanceField = default!;
    private LoopFormModel _model { get; set; } = new();

    public override void RegisterValidationInjectors()
    {
        RegisterInjector(nameof(_model.Distance), () => _distanceField);
    }

    public override void SetUpdateModel(Loop Loop)
    {
        _model = new LoopFormModel(Loop);
    }

    public override Loop SubmitCreate()
    {
        return Loop.Create(_model.Distance);
    }

    public override Loop SubmitUpdate()
    {
        return Loop.Update(_model.Id, _model.Distance);
    }
}