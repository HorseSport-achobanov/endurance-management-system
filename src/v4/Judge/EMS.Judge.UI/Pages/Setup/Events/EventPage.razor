@using EMS.Domain.Setup.Entities;
@using EMS.Judge.UI.Pages.Setup.Events
@using EMS.Judge.UI.Pages.Setup.Officials
@using Not.Blazor.TM.Forms.Components;

@inherits NotComponent

<MudText Typo="Typo.h5">
    @Localizer.Get("Update", nameof(Event))
</MudText>

<NotFormUpdate T="Event" TForm="EventFields" Entity="_event" UpdateAction="_behind.Update" />

<MudPaper>
    <OfficialList />
</MudPaper>

@code {
    private Event _event = default!;
    [Inject]
    public INotBehind<Event> _behind { get; set; } = default!;

    protected override async Task OnInitializedAsync()
    {
        var entity = await _behind.Read(default);
        if (entity == null)
        {
            throw ThrowHelper.Exception($"Event cannot be null here");
        }
        _event = entity;
    }
}