@using Common.Domain;
@using EMS.Domain.Objects;
@using EMS.Judge.Setup.Events;
@using EMS.Judge.UI.Contexts;
@using Not.Blazor.Forms;
@inherits NotFormFields<IEventFields>;
@inject ICountriesContext _countries;

<MudCardContent>
    <MudTextField Label="Place" @ref="_placeField"
        @bind-Value="Model.Place"
        For="@(() => Model.Place)" />
</MudCardContent>

<MudCardContent>
    <MudAutocomplete Label="Country" @ref="_countryField"
        T="Country"
        CoerceText="true"
        SearchFunc="@_countries.Search"
        @bind-Value="Model.Country"
        For="@(() => Model.Country)" />
</MudCardContent>

@code {
    private MudTextField<string?> _placeField = default!;
    private MudAutocomplete<Country?> _countryField = default!;

    protected override void OnInitialized()
    {
        RegisterInjector(nameof(Model.Place), () => _placeField);
        RegisterInjector(nameof(Model.Country), () => _countryField);
    }
}