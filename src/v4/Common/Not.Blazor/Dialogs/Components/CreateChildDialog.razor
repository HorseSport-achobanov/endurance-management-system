@using Common.Application;
@using Common.Application.CRUD;
@using Common.Domain;
@using Common.Services;
@using Not.Blazor.Forms;
@using Common.Application.Behinds;

@typeparam T where T : DomainEntity;
@typeparam TForm where TForm : NotFormFields<T>;
@inject INotBehindParent<T> _parentBehind;

<InternalCreateDialog T="T" TForm="TForm" OnCreate="OnCreate" />

@code {
    [CascadingParameter]
    protected MudDialogInstance Dialog { get; set; } = default!;

    protected async Task OnCreate(T entity)
    {
        await _parentBehind.Create(entity);
        Dialog.Close(DialogResult.Ok(true));
    }
}