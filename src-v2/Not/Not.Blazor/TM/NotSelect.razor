@using Not.Blazor.Components
@using Not.Blazor.TM;
@using Not.Blazor.TM.Models;

@inherits NotComponent
@typeparam T

<MudSelect T="T" @bind-Value="Value" Placeholder="@Placeholder" Label="@Localizer.Get(Label)">
    @foreach (var item in Items)
    {
        <MudSelectItem Value="@item.Value">@item.Label</MudSelectItem>
    }
</MudSelect>

@code {
    private T _value = default!;
    // TODO: Implement Validation injection for custom input components
    [Parameter]
    public IEnumerable<NotListModel<T>> Items { get; set; } = default!;
    [Parameter]
    public string Label { get; set; } = default!;
    [Parameter]
    public string Placeholder { get; set; } = default!;
    [Parameter]
    public T Value
    {
        get => _value;
        set
        {
            if (_value?.GetHashCode() == value?.GetHashCode())
            {
                return;
            }
            _value = value;
            ValueChanged.InvokeAsync(value);
        }
    }
    [Parameter]
    public EventCallback<T> ValueChanged { get; set; }
}