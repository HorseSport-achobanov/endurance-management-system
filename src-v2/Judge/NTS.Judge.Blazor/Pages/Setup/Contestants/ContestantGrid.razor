@using NTS.Domain.Setup.Entities;
@using Not.Blazor.Navigation;
@using Not.Services;

@inherits NotComponent

<NotH2 Class="pt-6 pl-6">@Localizer.Get("Contestants")</NotH2>
<NotButtonCreate Class="mt-1 ml-6 mb-3" OnClick="_contestantNavigator.Create" />
<MudDivider/>
<MudDataGrid T="Contestant" Items="_parentBehind.Children" ReadOnly="true" Bordered="true" Dense="true">
    <Columns>
        <PropertyColumn Property="x => x.StartTimeOverride" Title="@Localizer.Get("StartTimeOverride")" />
        <TemplateColumn CellClass="action-column">
            <CellTemplate>
                <NotButtonDelete OnClick="() => _parentBehind.Delete(context.Item)" Class="action-button-top" />
                <NotButtonUpdate OnClick="() => this._contestantNavigator.Update(CONTESTANT_UPDATE, context.Item)" />
            </CellTemplate>
        </TemplateColumn>
    </Columns>
</MudDataGrid>

@code {
    [Inject]
    private INotBehindParent<Contestant> _parentBehind { get; set; } = default!;
    [Inject]
    private IFormNavigator<Contestant, ContestantForm> _contestantNavigator { get; set; } = default!;
    [Inject]
    private INavigator _navigator { get; set; } = default!;
}