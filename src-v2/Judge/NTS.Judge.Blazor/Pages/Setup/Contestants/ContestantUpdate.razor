@using NTS.Domain.Setup.Entities;
@using Not.Blazor.Components;
@using Not.Blazor.Navigation;
@using Not.Blazor.TM.Forms.Components
@using Not.Blazor.TM.Pages

@attribute [Route(CONTESTANT_UPDATE)]
@inherits NotComponent

<NotPage Title="Configure Contestant">

    <Main>
        <NotFormUpdate T="Contestant" TForm="ContestantForm" Entity="_navigator.ConsumeParameter<Contestant>()" UpdateAction="Update" />
    </Main>

</NotPage>

@code {
    private Contestant _contestant { get; set; } = default!;
    [Inject]
    private INotSetBehind<Contestant> _parentBehind { get; set; } = default!;
    [Inject]
    private INavigator _navigator { get; set; } = default!;

    protected async Task Update(Contestant contestant)
    {
        await _parentBehind.Update(contestant);
        _navigator.NavigateTo(ENDURANCE_EVENT_PAGE);
    }
}