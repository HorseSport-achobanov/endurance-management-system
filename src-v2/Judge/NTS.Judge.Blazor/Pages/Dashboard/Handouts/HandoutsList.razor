@using NTS.Judge.Blazor.Pages.Dashboard.Components
@using NTS.Judge.Blazor.Ports

@inherits NotComponent

<NotButtonPrimary OnClick="PopAndPrint">Print</NotButtonPrimary>

@foreach (var handout in _behind.Handouts)
{
    var header = handout.Header;
    <MudGrid Style="margin-top:0!important;" Justify="Justify.Center">
        <MudItem xs="2" Class="align-content-center">
            <MudImage Src="images/logo-bfks.JPG" />
        </MudItem>
        <MudItem xs="8">
            <NotH3>@($"{header.PopulatedPlace} {header.EventSpan}")</NotH3>
            <NotH2>@header.Title</NotH2>
            <MudDivider />
            <MudGrid Class="margin-top:0!important" Justify="Justify.Center">
                @if (header.PresidentGroundJury != null)
                {
                    <MudItem xs="6">
                        @header.PresidentGroundJury
                    </MudItem>
                }
                @if (header.PresidentVet != null)
                {
                    <MudItem xs="6">
                        @header.PresidentVet
                    </MudItem>
                }
                @if (header.FeiVetDelegate != null)
                {
                    <MudItem xs="6">
                        @header.FeiVetDelegate
                    </MudItem>
                }
                @if (header.FeiTechDelegate != null)
                {
                    <MudItem xs="6">
                        @header.FeiTechDelegate
                    </MudItem>
                }
                @if (header.ActiveVet != null)
                {
                    <MudItem xs="6">
                        @header.ActiveVet
                    </MudItem>
                }
                @if (header.ForeignJudge != null)
                {
                    <MudItem xs="6">
                        @header.ForeignJudge
                    </MudItem>
                }
            </MudGrid>
        </MudItem>

        <MudItem xs="2" Class="align-content-center">
            <MudImage Src="images/logo-fei.JPG" />
        </MudItem>

        <MudItem xs="12">
            <ParticipationTable Phases="handout.Phases" Class="align-self-center"/>
        </MudItem>
    </MudGrid>

}

@code {
    [Inject]
    IHandoutsBehind _behind { get; set; } = default!;

    protected override void OnInitialized()
    {
        Observe(_behind);
    }

    private void PopAndPrint()
    {
        var handouts = _behind.PopAll();
    }
}
